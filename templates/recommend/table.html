<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <title></title>
    <style type="text/css">
			/*表格样式*/
			table {
				width: 80%;
				background: #ccc;
				margin: 10px auto;
				border-collapse: collapse;/*border-collapse:collapse合并内外边距(去除表格单元格默认的2个像素内外边距*/
			}
			th,td {
				height: 25px;
				line-height: 25px;
				text-align: center;
				border: 1px solid #ccc;
			}
			th {
				background: #eee;
				font-weight: normal;
			}
			tr {
				background: #fff;
			}
			tr:hover {
				background: #cc0;
			}
			td a {
				color: #06f;
				text-decoration: none;
			}
			td a:hover {
				color: #06f;
				text-decoration: underline;
			}    
    </style>
</head>
<body>
<div ><a>按院校查询：</a><input name="key" type="text" id="key" onkeydown="onSearch(this,1)" value="" /><a>按专业查询：</a><input name="key" type="text" id="key" onkeydown="onSearch(this,2)" value="" /></div>
<table id="store">
    <thead>
    <tr>
        <th>年份</th>
        <th>学校</th>
        <th>专业</th>
        <th>名次</th>
    </tr>
    </thead>
    <tbody>
        {% for item in collegeapplication %}
        <tr>
            <td> {{2020}}</td>
            <td> {{item.school_text}}</td>
            <td> {{item.major_text}}</td>
            <td> {{item.rank_int}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<script type="text/javascript">
function onSearch(obj,num){//js函数开始
  setTimeout(function(){//因为是即时查询，需要用setTimeout进行延迟，让值写入到input内，再读取
    var storeId = document.getElementById('store');//获取table的id标识
    var rowsLength = storeId.rows.length;//表格总共有多少行
    var key = obj.value;//获取输入框的值
    var searchCol = num;//要搜索的哪一列，从0开始数起
    for(var i=1;i<rowsLength;i++){//按表的行数进行循环，本例第一行是标题，所以i=1，从第二行开始筛选（从0数起）
      var searchText = storeId.rows[i].cells[searchCol].innerHTML;//取得table行，列的值
      if(searchText.match(key)){//用match函数进行筛选，如果input的值，即变量 key的值为空，返回的是ture，
        storeId.rows[i].style.display='';//显示行操作，
      }else{
        storeId.rows[i].style.display='none';//隐藏行操作
      }
    }
  },100);//100为延时时间
}
</script>
</body>
</html>